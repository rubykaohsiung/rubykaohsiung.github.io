<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>建立 Rails 外掛的基礎知識 — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="建立 Rails 外掛的基礎知識 — Ruby on Rails Guides" />
  <meta name="description" content="建立 Rails 外掛的基礎知識Rails 外掛是核心框架的擴充套件或修改。外掛提供： 一種讓開發人員在不損害穩定程式碼庫的情況下分享前沿想法的方式。 分段架構，以便程式碼單元可以根據自己的釋出時間表進行修復或更新。 核心開發人員的出路，這樣他們就不必在陽光下包含每一個很酷的新功能。 閱讀本指南後，您將瞭解： 如何從頭開始建立外掛。 如何為外掛編寫和執行測試。 本指南描述瞭如何構建一個測試驅動的外掛，它將： 擴充套件核心 Ruby 類，如 Hash 和 String。 在 acts_as 外掛的傳統中新增方法到 ApplicationRecord。 為您提供有關在外掛中放置產生器的位置的資訊。 出於本指南的目的，請假裝您是一名狂熱的觀鳥者。 你最喜歡的鳥是 Yaffle，你想建立一個外掛，讓其他開發者在 Yaffle 中分享 善良。" />
  <meta property="og:description" content="建立 Rails 外掛的基礎知識Rails 外掛是核心框架的擴充套件或修改。外掛提供： 一種讓開發人員在不損害穩定程式碼庫的情況下分享前沿想法的方式。 分段架構，以便程式碼單元可以根據自己的釋出時間表進行修復或更新。 核心開發人員的出路，這樣他們就不必在陽光下包含每一個很酷的新功能。 閱讀本指南後，您將瞭解： 如何從頭開始建立外掛。 如何為外掛編寫和執行測試。 本指南描述瞭如何構建一個測試驅動的外掛，它將： 擴充套件核心 Ruby 類，如 Hash 和 String。 在 acts_as 外掛的傳統中新增方法到 ApplicationRecord。 為您提供有關在外掛中放置產生器的位置的資訊。 出於本指南的目的，請假裝您是一名狂熱的觀鳥者。 你最喜歡的鳥是 Yaffle，你想建立一個外掛，讓其他開發者在 Yaffle 中分享 善良。" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="Ruby on Rails Guides" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
    <div id="version-badge">v7.0.0</div>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">更多資訊請前往 <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        更多在 Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://weblog.rubyonrails.org/">部落格</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">指南</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://discuss.rubyonrails.org/">論壇</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">在 GitHub 上做出貢獻</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="返回首頁">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">首頁</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">手冊目錄</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>從這裡開始</dt>
                  <dd><a href="getting_started.html">Rails 入門</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Models</dt>
                  <dd><a href="active_record_basics.html">Active Record 基礎</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record 遷移 (Migrations)</a></dd>
                  <dd><a href="active_record_validations.html">Active Record 驗證 (Validations)</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record 回呼 (Callbacks)</a></dd>
                  <dd><a href="association_basics.html">Active Record 關聯 (Associations)</a></dd>
                  <dd><a href="active_record_querying.html">Active Record 查詢介面</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="layouts_and_rendering.html">Rails 中的版面配置(Layouts)和算繪(Rendering)</a></dd>
                  <dd><a href="form_helpers.html">Action View 表單 Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller 概述</a></dd>
                  <dd><a href="routing.html">Rails 從外到內路由</a></dd>
                </div>
                <div class="guides-section">
                  <dt>其他元件</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support 核心擴充套件</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer 基礎知識</a></dd>
                  <dd><a href="active_job_basics.html">Active Job 基礎</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage 概述</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable 概述</a></dd>
                  <dd><a href="webpacker.html">Webpacker</a></dd>
                </div>
                <div class="guides-section">
                  <dt>深入研究</dt>
                  <dd><a href="i18n.html">Rails 國際化 (I18n) API</a></dd>
                  <dd><a href="testing.html">測試 Rails 應用程式</a></dd>
                  <dd><a href="security.html">保護 Rails 應用程式</a></dd>
                  <dd><a href="debugging_rails_applications.html">除錯 Rails 應用程式</a></dd>
                  <dd><a href="configuring.html">設定 Rails 應用程式</a></dd>
                  <dd><a href="command_line.html">Rails 命令列</a></dd>
                  <dd><a href="asset_pipeline.html">Asset Pipeline</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">自動載入和重新載入常量</a></dd>
                  <dd><a href="caching_with_rails.html">使用 Rails 快取</a></dd>
                  <dd><a href="api_app.html">將 Rails 用於僅 API 的應用程式</a></dd>
                </div>
                <div class="guides-section">
                  <dt>擴充 rails</dt>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">建立和自定義 Rails 產生器和模板</a></dd>
                </div>
                <div class="guides-section">
                  <dt>貢獻</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">在 Rails 上為 Ruby 做貢獻</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API 文件指南</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">指南指南</a></dd>
                </div>
                <div class="guides-section">
                  <dt>政策</dt>
                  <dd><a href="maintenance_policy.html">維修政策</a></dd>
                </div>
                <div class="guides-section">
                  <dt>發行說明</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">在 Rails 上升級 Ruby</a></dd>
                  <dd><a href="6_1_release_notes.html">6.1 版 - 2020 年 12 月</a></dd>
                  <dd><a href="6_0_release_notes.html">6.0 版 - 2019 年 8 月</a></dd>
                  <dd><a href="5_2_release_notes.html">5.2 版 - 2018 年 4 月</a></dd>
                  <dd><a href="5_1_release_notes.html">5.1 版 - 2017 年 4 月</a></dd>
                  <dd><a href="5_0_release_notes.html">5.0 版 - 2016 年 6 月</a></dd>
                  <dd><a href="4_2_release_notes.html">4.2 版 - 2014 年 12 月</a></dd>
                  <dd><a href="4_1_release_notes.html">4.1 版 - 2014 年 4 月</a></dd>
                  <dd><a href="4_0_release_notes.html">4.0 版 - 2013 年 6 月</a></dd>
                  <dd><a href="3_2_release_notes.html">3.2 版 - 2012 年 1 月</a></dd>
                  <dd><a href="3_1_release_notes.html">3.1 版 - 2011 年 8 月</a></dd>
                  <dd><a href="3_0_release_notes.html">3.0 版 - 2010 年 8 月</a></dd>
                  <dd><a href="2_3_release_notes.html">2.3 版 - 2009 年 3 月</a></dd>
                  <dd><a href="2_2_release_notes.html">2.2 版 - 2008 年 11 月</a></dd>
                </div>
            </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">貢獻</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">手冊目錄</option>
              <optgroup label="從這裡開始">
                  <option value="getting_started.html">Rails 入門</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record 基礎</option>
                  <option value="active_record_migrations.html">Active Record 遷移 (Migrations)</option>
                  <option value="active_record_validations.html">Active Record 驗證 (Validations)</option>
                  <option value="active_record_callbacks.html">Active Record 回呼 (Callbacks)</option>
                  <option value="association_basics.html">Active Record 關聯 (Associations)</option>
                  <option value="active_record_querying.html">Active Record 查詢介面</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Rails 中的版面配置(Layouts)和算繪(Rendering)</option>
                  <option value="form_helpers.html">Action View 表單 Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller 概述</option>
                  <option value="routing.html">Rails 從外到內路由</option>
              </optgroup>
              <optgroup label="其他元件">
                  <option value="active_support_core_extensions.html">Active Support 核心擴充套件</option>
                  <option value="action_mailer_basics.html">Action Mailer 基礎知識</option>
                  <option value="active_job_basics.html">Active Job 基礎</option>
                  <option value="active_storage_overview.html">Active Storage 概述</option>
                  <option value="action_cable_overview.html">Action Cable 概述</option>
                  <option value="webpacker.html">Webpacker</option>
              </optgroup>
              <optgroup label="深入研究">
                  <option value="i18n.html">Rails 國際化 (I18n) API</option>
                  <option value="testing.html">測試 Rails 應用程式</option>
                  <option value="security.html">保護 Rails 應用程式</option>
                  <option value="debugging_rails_applications.html">除錯 Rails 應用程式</option>
                  <option value="configuring.html">設定 Rails 應用程式</option>
                  <option value="command_line.html">Rails 命令列</option>
                  <option value="asset_pipeline.html">Asset Pipeline</option>
                  <option value="autoloading_and_reloading_constants.html">自動載入和重新載入常量</option>
                  <option value="caching_with_rails.html">使用 Rails 快取</option>
                  <option value="api_app.html">將 Rails 用於僅 API 的應用程式</option>
              </optgroup>
              <optgroup label="擴充 rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">建立和自定義 Rails 產生器和模板</option>
              </optgroup>
              <optgroup label="貢獻">
                  <option value="contributing_to_ruby_on_rails.html">在 Rails 上為 Ruby 做貢獻</option>
                  <option value="api_documentation_guidelines.html">API 文件指南</option>
                  <option value="ruby_on_rails_guides_guidelines.html">指南指南</option>
              </optgroup>
              <optgroup label="政策">
                  <option value="maintenance_policy.html">維修政策</option>
              </optgroup>
              <optgroup label="發行說明">
                  <option value="upgrading_ruby_on_rails.html">在 Rails 上升級 Ruby</option>
                  <option value="6_1_release_notes.html">6.1 版 - 2020 年 12 月</option>
                  <option value="6_0_release_notes.html">6.0 版 - 2019 年 8 月</option>
                  <option value="5_2_release_notes.html">5.2 版 - 2018 年 4 月</option>
                  <option value="5_1_release_notes.html">5.1 版 - 2017 年 4 月</option>
                  <option value="5_0_release_notes.html">5.0 版 - 2016 年 6 月</option>
                  <option value="4_2_release_notes.html">4.2 版 - 2014 年 12 月</option>
                  <option value="4_1_release_notes.html">4.1 版 - 2014 年 4 月</option>
                  <option value="4_0_release_notes.html">4.0 版 - 2013 年 6 月</option>
                  <option value="3_2_release_notes.html">3.2 版 - 2012 年 1 月</option>
                  <option value="3_1_release_notes.html">3.1 版 - 2011 年 8 月</option>
                  <option value="3_0_release_notes.html">3.0 版 - 2010 年 8 月</option>
                  <option value="2_3_release_notes.html">2.3 版 - 2009 年 3 月</option>
                  <option value="2_2_release_notes.html">2.2 版 - 2008 年 11 月</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>建立 Rails 外掛的基礎知識</h2><p>Rails 外掛是核心框架的擴充套件或修改。外掛提供：</p>
<ul>
<li>一種讓開發人員在不損害穩定程式碼庫的情況下分享前沿想法的方式。</li>
<li>分段架構，以便程式碼單元可以根據自己的釋出時間表進行修復或更新。</li>
<li>核心開發人員的出路，這樣他們就不必在陽光下包含每一個很酷的新功能。</li>
</ul>
<p>閱讀本指南後，您將瞭解：</p>
<ul>
<li>如何從頭開始建立外掛。</li>
<li>如何為外掛編寫和執行測試。</li>
</ul>
<p>本指南描述瞭如何構建一個測試驅動的外掛，它將：</p>
<ul>
<li>擴充套件核心 Ruby 類，如 Hash 和 String。</li>
<li>在 <code>acts_as</code> 外掛的傳統中新增方法到 <code>ApplicationRecord</code>。</li>
<li>為您提供有關在外掛中放置產生器的位置的資訊。</li>
</ul>
<p>出於本指南的目的，請假裝您是一名狂熱的觀鳥者。
你最喜歡的鳥是 Yaffle，你想建立一個外掛，讓其他開發者在 Yaffle 中分享
善良。</p>

                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li>
<a href="#">設定</a>

<ul>
<li><a href="#gemified">產生一個 gemified 外掛。</a></li>
</ul>
</li>
<li><a href="#">測試您新產生的外掛</a></li>
<li><a href="#">擴充套件核心類</a></li>
<li>
<a href="#active-record-acts-as">向 Active Record 新增“acts_as”方法</a>

<ul>
<li><a href="#">新增類方法</a></li>
<li><a href="#">新增實例方法</a></li>
</ul>
</li>
<li><a href="#">發電機</a></li>
<li><a href="#gem">釋出您的 Gem</a></li>
<li>
<a href="#rdoc">RDoc 文件</a>

<ul>
<li><a href="#">參考</a></li>
</ul>
</li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id=""><a class="anchorlink" href="#">1 設定</a></h3><p>目前，Rails 外掛被構建為 gems，<em>gemified plugins</em>。它們可以被共享
如果需要，使用 RubyGems 和 Bundler 的不同 Rails 應用程式。</p><h4 id="gemified"><a class="anchorlink" href="#gemified">1.1 產生一個 gemified 外掛。</a></h4><p>Rails 附帶一個 <code>rails plugin new</code> 命令，它建立一個
用於開發具有能力的任何型別的 Rails 擴充套件的骨架
使用虛擬 Rails 應用程式執行整合測試。建立您的
帶有命令的外掛：</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>plugin new yaffle
</code></pre>
<button class="clipboard-button" data-clipboard-text="rails plugin new yaffle
">Copy</button>
</div>
<p>通過尋求幫助來檢視用法和選項：</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>plugin new <span class="nt">--help</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="rails plugin new --help
">Copy</button>
</div>
<h3 id=""><a class="anchorlink" href="#">2 測試您新產生的外掛</a></h3><p>您可以導航到包含外掛的目錄，執行 <code>bundle install</code> 命令
並使用 <code>bin/test</code> 命令執行產生的測試。</p><p>你應該看到：</p><div class="code_container">
<pre><code class="highlight plaintext">  1 runs, 1 assertions, 0 failures, 0 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="  1 runs, 1 assertions, 0 failures, 0 errors, 0 skips
">Copy</button>
</div>
<p>這將告訴您一切都已正確產生，您已準備好開始新增功能。</p><h3 id=""><a class="anchorlink" href="#">3 擴充套件核心類</a></h3><p>本節將解釋如何向 String 新增一個方法，該方法將在您的 Rails 應用程式中的任何位置可用。</p><p>在本例中，您將向 String 新增一個名為 <code>to_squawk</code> 的方法。首先，建立一個包含幾個斷言的新測試檔案：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/test/core_ext_test.rb</span>

<span class="nb">require</span> <span class="s2">"test_helper"</span>

<span class="k">class</span> <span class="nc">CoreExtTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="k">def</span> <span class="nf">test_to_squawk_prepends_the_word_squawk</span>
    <span class="n">assert_equal</span> <span class="s2">"squawk! Hello World"</span><span class="p">,</span> <span class="s2">"Hello World"</span><span class="p">.</span><span class="nf">to_squawk</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/test/core_ext_test.rb

require "test_helper"

class CoreExtTest &lt; ActiveSupport::TestCase
  def test_to_squawk_prepends_the_word_squawk
    assert_equal "squawk! Hello World", "Hello World".to_squawk
  end
end
'>Copy</button>
</div>
<p>執行 <code>bin/test</code> 來執行測試。這個測試應該會失敗，因為我們還沒有實現 <code>to_squawk</code> 方法：</p><div class="code_container">
<pre><code class="highlight plaintext">E

Error:
CoreExtTest#test_to_squawk_prepends_the_word_squawk:
NoMethodError: undefined method `to_squawk' for "Hello World":String


bin/test /path/to/yaffle/test/core_ext_test.rb:4

.

Finished in 0.003358s, 595.6483 runs/s, 297.8242 assertions/s.

2 runs, 1 assertions, 0 failures, 1 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="E

Error:
CoreExtTest#test_to_squawk_prepends_the_word_squawk:
NoMethodError: undefined method `to_squawk' for &quot;Hello World&quot;:String


bin/test /path/to/yaffle/test/core_ext_test.rb:4

.

Finished in 0.003358s, 595.6483 runs/s, 297.8242 assertions/s.

2 runs, 1 assertions, 0 failures, 1 errors, 0 skips
">Copy</button>
</div>
<p>太好了 - 現在您已準備好開始開發。</p><p>在 <code>lib/yaffle.rb</code> 中，新增 <code>require "yaffle/core_ext"</code>：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle.rb</span>

<span class="nb">require</span> <span class="s2">"yaffle/railtie"</span>
<span class="nb">require</span> <span class="s2">"yaffle/core_ext"</span>

<span class="k">module</span> <span class="nn">Yaffle</span>
  <span class="c1"># Your code goes here...</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/lib/yaffle.rb

require "yaffle/railtie"
require "yaffle/core_ext"

module Yaffle
  # Your code goes here...
end
'>Copy</button>
</div>
<p>最後，建立 <code>core_ext.rb</code> 檔案並新增 <code>to_squawk</code> 方法：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle/core_ext.rb</span>

<span class="k">class</span> <span class="nc">String</span>
  <span class="k">def</span> <span class="nf">to_squawk</span>
    <span class="s2">"squawk! </span><span class="si">#{</span><span class="nb">self</span><span class="si">}</span><span class="s2">"</span><span class="p">.</span><span class="nf">strip</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/lib/yaffle/core_ext.rb

class String
  def to_squawk
    "squawk! #{self}".strip
  end
end
'>Copy</button>
</div>
<p>要測試您的方法是否按規定執行，請使用外掛目錄中的 <code>bin/test</code> 執行單元測試。</p><div class="code_container">
<pre><code class="highlight plaintext">  2 runs, 2 assertions, 0 failures, 0 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="  2 runs, 2 assertions, 0 failures, 0 errors, 0 skips
">Copy</button>
</div>
<p>要在 action 中看到這一點，請切換到 <code>test/dummy</code> 目錄，啟動 <code>bin/rails console</code>，然後開始尖叫：</p><div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="s2">"Hello World"</span><span class="p">.</span><span class="nf">to_squawk</span>
<span class="p">=&gt;</span> <span class="s2">"squawk! Hello World"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='"Hello World".to_squawk
'>Copy</button>
</div>
<h3 id="active-record-acts-as"><a class="anchorlink" href="#active-record-acts-as">4 向 Active Record 新增“acts_as”方法</a></h3><p>外掛中的一個常見模式是向 models 新增一個名為 <code>acts_as_something</code> 的方法。在這種情況下，你
想編寫一個名為 <code>acts_as_yaffle</code> 的方法，將 <code>squawk</code> 方法新增到您的 Active Record models。</p><p>首先，設定您的檔案，以便您擁有：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/test/acts_as_yaffle_test.rb</span>

<span class="nb">require</span> <span class="s2">"test_helper"</span>

<span class="k">class</span> <span class="nc">ActsAsYaffleTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/test/acts_as_yaffle_test.rb

require "test_helper"

class ActsAsYaffleTest &lt; ActiveSupport::TestCase
end
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle.rb</span>

<span class="nb">require</span> <span class="s2">"yaffle/railtie"</span>
<span class="nb">require</span> <span class="s2">"yaffle/core_ext"</span>
<span class="nb">require</span> <span class="s2">"yaffle/acts_as_yaffle"</span>

<span class="k">module</span> <span class="nn">Yaffle</span>
  <span class="c1"># Your code goes here...</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/lib/yaffle.rb

require "yaffle/railtie"
require "yaffle/core_ext"
require "yaffle/acts_as_yaffle"

module Yaffle
  # Your code goes here...
end
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle/acts_as_yaffle.rb</span>

<span class="k">module</span> <span class="nn">Yaffle</span>
  <span class="k">module</span> <span class="nn">ActsAsYaffle</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# yaffle/lib/yaffle/acts_as_yaffle.rb

module Yaffle
  module ActsAsYaffle
  end
end
">Copy</button>
</div>
<h4 id=""><a class="anchorlink" href="#">4.1 新增類方法</a></h4><p>這個外掛會期望你已經在你的 model 中添加了一個名為 <code>last_squawk</code> 的方法。但是，那
外掛使用者可能已經在他們使用的名為 <code>last_squawk</code> 的 model 上定義了一個方法
為了別的東西。該外掛將允許通過新增名為 <code>yaffle_text_field</code> 的類方法來更改名稱。</p><p>首先，編寫一個失敗的測試來顯示您想要的行為：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/test/acts_as_yaffle_test.rb</span>

<span class="nb">require</span> <span class="s2">"test_helper"</span>

<span class="k">class</span> <span class="nc">ActsAsYaffleTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="k">def</span> <span class="nf">test_a_hickwalls_yaffle_text_field_should_be_last_squawk</span>
    <span class="n">assert_equal</span> <span class="s2">"last_squawk"</span><span class="p">,</span> <span class="no">Hickwall</span><span class="p">.</span><span class="nf">yaffle_text_field</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_a_wickwalls_yaffle_text_field_should_be_last_tweet</span>
    <span class="n">assert_equal</span> <span class="s2">"last_tweet"</span><span class="p">,</span> <span class="no">Wickwall</span><span class="p">.</span><span class="nf">yaffle_text_field</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/test/acts_as_yaffle_test.rb

require "test_helper"

class ActsAsYaffleTest &lt; ActiveSupport::TestCase
  def test_a_hickwalls_yaffle_text_field_should_be_last_squawk
    assert_equal "last_squawk", Hickwall.yaffle_text_field
  end

  def test_a_wickwalls_yaffle_text_field_should_be_last_tweet
    assert_equal "last_tweet", Wickwall.yaffle_text_field
  end
end
'>Copy</button>
</div>
<p>當您執行 <code>bin/test</code> 時，您應該看到以下內容：</p><div class="code_container">
<pre><code class="highlight plaintext">＃ 跑步：

..E

Error:
ActsAsYaffleTest#test_a_wickwalls_yaffle_text_field_should_be_last_tweet:
NameError: uninitialized constant ActsAsYaffleTest::Wickwall


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:8

E

Error:
ActsAsYaffleTest#test_a_hickwalls_yaffle_text_field_should_be_last_squawk:
NameError: uninitialized constant ActsAsYaffleTest::Hickwall


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:4



Finished in 0.004812s, 831.2949 runs/s, 415.6475 assertions/s.

4 runs, 2 assertions, 0 failures, 2 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="＃ 跑步：

..E

Error:
ActsAsYaffleTest#test_a_wickwalls_yaffle_text_field_should_be_last_tweet:
NameError: uninitialized constant ActsAsYaffleTest::Wickwall


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:8

E

Error:
ActsAsYaffleTest#test_a_hickwalls_yaffle_text_field_should_be_last_squawk:
NameError: uninitialized constant ActsAsYaffleTest::Hickwall


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:4



Finished in 0.004812s, 831.2949 runs/s, 415.6475 assertions/s.

4 runs, 2 assertions, 0 failures, 2 errors, 0 skips
">Copy</button>
</div>
<p>這告訴我們，我們沒有要測試的必要 models（Hickwall 和 Wickwall）。
我們可以通過從
<code>test/dummy</code> 目錄：</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">cd test</span>/dummy
<span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate model Hickwall last_squawk:string
<span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate model Wickwall last_squawk:string last_tweet:string
</code></pre>
<button class="clipboard-button" data-clipboard-text="cd test/dummy
bin/rails generate model Hickwall last_squawk:string
bin/rails generate model Wickwall last_squawk:string last_tweet:string
">Copy</button>
</div>
<p>現在您可以通過導航到您的虛擬應用程式在您的測試資料庫中建立必要的資料庫表
和遷移資料庫。首輪：</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">cd test</span>/dummy
<span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>db:migrate
</code></pre>
<button class="clipboard-button" data-clipboard-text="cd test/dummy
bin/rails db:migrate
">Copy</button>
</div>
<p>當你在這裡時，改變 Hickwall 和 Wickwall models，讓他們知道他們應該採取行動
像yaffle。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># test/dummy/app/models/hickwall.rb</span>

<span class="k">class</span> <span class="nc">Hickwall</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">acts_as_yaffle</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# test/dummy/app/models/hickwall.rb

class Hickwall &lt; ApplicationRecord
  acts_as_yaffle
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># test/dummy/app/models/wickwall.rb</span>

<span class="k">class</span> <span class="nc">Wickwall</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">acts_as_yaffle</span> <span class="ss">yaffle_text_field: :last_tweet</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# test/dummy/app/models/wickwall.rb

class Wickwall &lt; ApplicationRecord
  acts_as_yaffle yaffle_text_field: :last_tweet
end
">Copy</button>
</div>
<p>我們還將新增程式碼來定義 <code>acts_as_yaffle</code> 方法。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle/acts_as_yaffle.rb</span>

<span class="k">module</span> <span class="nn">Yaffle</span>
  <span class="k">module</span> <span class="nn">ActsAsYaffle</span>
    <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

    <span class="n">class_methods</span> <span class="k">do</span>
      <span class="k">def</span> <span class="nf">acts_as_yaffle</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# yaffle/lib/yaffle/acts_as_yaffle.rb

module Yaffle
  module ActsAsYaffle
    extend ActiveSupport::Concern

    class_methods do
      def acts_as_yaffle(options = {})
      end
    end
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># test/dummy/app/models/application_record.rb</span>

<span class="k">class</span> <span class="nc">ApplicationRecord</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Yaffle</span><span class="o">::</span><span class="no">ActsAsYaffle</span>

  <span class="nb">self</span><span class="p">.</span><span class="nf">abstract_class</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# test/dummy/app/models/application_record.rb

class ApplicationRecord &lt; ActiveRecord::Base
  include Yaffle::ActsAsYaffle

  self.abstract_class = true
end
">Copy</button>
</div>
<p>然後您可以返回到外掛的根目錄 (<code>cd ../..</code>) 並使用 <code>bin/test</code> 重新執行測試。</p><div class="code_container">
<pre><code class="highlight plaintext">＃ 跑步：

.E

Error:
ActsAsYaffleTest#test_a_hickwalls_yaffle_text_field_should_be_last_squawk:
NoMethodError: undefined method `yaffle_text_field' for #&lt;Class:0x0055974ebbe9d8&gt;


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:4

E

Error:
ActsAsYaffleTest#test_a_wickwalls_yaffle_text_field_should_be_last_tweet:
NoMethodError: undefined method `yaffle_text_field' for #&lt;Class:0x0055974eb8cfc8&gt;


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:8

.

Finished in 0.008263s, 484.0999 runs/s, 242.0500 assertions/s.

4 runs, 2 assertions, 0 failures, 2 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="＃ 跑步：

.E

Error:
ActsAsYaffleTest#test_a_hickwalls_yaffle_text_field_should_be_last_squawk:
NoMethodError: undefined method `yaffle_text_field' for #&lt;Class:0x0055974ebbe9d8&gt;


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:4

E

Error:
ActsAsYaffleTest#test_a_wickwalls_yaffle_text_field_should_be_last_tweet:
NoMethodError: undefined method `yaffle_text_field' for #&lt;Class:0x0055974eb8cfc8&gt;


bin/test /path/to/yaffle/test/acts_as_yaffle_test.rb:8

.

Finished in 0.008263s, 484.0999 runs/s, 242.0500 assertions/s.

4 runs, 2 assertions, 0 failures, 2 errors, 0 skips
">Copy</button>
</div>
<p>越來越近了... 現在我們將實現 <code>acts_as_yaffle</code> 方法的程式碼以使測試通過。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle/acts_as_yaffle.rb</span>

<span class="k">module</span> <span class="nn">Yaffle</span>
  <span class="k">module</span> <span class="nn">ActsAsYaffle</span>
    <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

    <span class="n">class_methods</span> <span class="k">do</span>
      <span class="k">def</span> <span class="nf">acts_as_yaffle</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
        <span class="n">cattr_accessor</span> <span class="ss">:yaffle_text_field</span><span class="p">,</span> <span class="ss">default: </span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="ss">:yaffle_text_field</span><span class="p">]</span> <span class="o">||</span> <span class="ss">:last_squawk</span><span class="p">).</span><span class="nf">to_s</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# yaffle/lib/yaffle/acts_as_yaffle.rb

module Yaffle
  module ActsAsYaffle
    extend ActiveSupport::Concern

    class_methods do
      def acts_as_yaffle(options = {})
        cattr_accessor :yaffle_text_field, default: (options[:yaffle_text_field] || :last_squawk).to_s
      end
    end
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># test/dummy/app/models/application_record.rb</span>

<span class="k">class</span> <span class="nc">ApplicationRecord</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Yaffle</span><span class="o">::</span><span class="no">ActsAsYaffle</span>

  <span class="nb">self</span><span class="p">.</span><span class="nf">abstract_class</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# test/dummy/app/models/application_record.rb

class ApplicationRecord &lt; ActiveRecord::Base
  include Yaffle::ActsAsYaffle

  self.abstract_class = true
end
">Copy</button>
</div>
<p>當您執行 <code>bin/test</code> 時，您應該看到測試全部通過：</p><div class="code_container">
<pre><code class="highlight plaintext">  4 runs, 4 assertions, 0 failures, 0 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="  4 runs, 4 assertions, 0 failures, 0 errors, 0 skips
">Copy</button>
</div>
<h4 id=""><a class="anchorlink" href="#">4.2 新增實例方法</a></h4><p>該外掛將向任何呼叫 <code>acts_as_yaffle</code> 的 Active Record 物件新增一個名為“squawk”的方法。 '吱吱'
方法將簡單地設定資料庫中欄位之一的 value。</p><p>首先，編寫一個失敗的測試來顯示您想要的行為：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/test/acts_as_yaffle_test.rb</span>
<span class="nb">require</span> <span class="s2">"test_helper"</span>

<span class="k">class</span> <span class="nc">ActsAsYaffleTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="k">def</span> <span class="nf">test_a_hickwalls_yaffle_text_field_should_be_last_squawk</span>
    <span class="n">assert_equal</span> <span class="s2">"last_squawk"</span><span class="p">,</span> <span class="no">Hickwall</span><span class="p">.</span><span class="nf">yaffle_text_field</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_a_wickwalls_yaffle_text_field_should_be_last_tweet</span>
    <span class="n">assert_equal</span> <span class="s2">"last_tweet"</span><span class="p">,</span> <span class="no">Wickwall</span><span class="p">.</span><span class="nf">yaffle_text_field</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_hickwalls_squawk_should_populate_last_squawk</span>
    <span class="n">hickwall</span> <span class="o">=</span> <span class="no">Hickwall</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">hickwall</span><span class="p">.</span><span class="nf">squawk</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">)</span>
    <span class="n">assert_equal</span> <span class="s2">"squawk! Hello World"</span><span class="p">,</span> <span class="n">hickwall</span><span class="p">.</span><span class="nf">last_squawk</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">test_wickwalls_squawk_should_populate_last_tweet</span>
    <span class="n">wickwall</span> <span class="o">=</span> <span class="no">Wickwall</span><span class="p">.</span><span class="nf">new</span>
    <span class="n">wickwall</span><span class="p">.</span><span class="nf">squawk</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">)</span>
    <span class="n">assert_equal</span> <span class="s2">"squawk! Hello World"</span><span class="p">,</span> <span class="n">wickwall</span><span class="p">.</span><span class="nf">last_tweet</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='# yaffle/test/acts_as_yaffle_test.rb
require "test_helper"

class ActsAsYaffleTest &lt; ActiveSupport::TestCase
  def test_a_hickwalls_yaffle_text_field_should_be_last_squawk
    assert_equal "last_squawk", Hickwall.yaffle_text_field
  end

  def test_a_wickwalls_yaffle_text_field_should_be_last_tweet
    assert_equal "last_tweet", Wickwall.yaffle_text_field
  end

  def test_hickwalls_squawk_should_populate_last_squawk
    hickwall = Hickwall.new
    hickwall.squawk("Hello World")
    assert_equal "squawk! Hello World", hickwall.last_squawk
  end

  def test_wickwalls_squawk_should_populate_last_tweet
    wickwall = Wickwall.new
    wickwall.squawk("Hello World")
    assert_equal "squawk! Hello World", wickwall.last_tweet
  end
end
'>Copy</button>
</div>
<p>執行測試以確保最後兩個測試失敗並顯示包含“NoMethodError: undefined method `squawk'”的錯誤，
然後將 <code>acts_as_yaffle.rb</code> 更新為如下所示：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># yaffle/lib/yaffle/acts_as_yaffle.rb</span>

<span class="k">module</span> <span class="nn">Yaffle</span>
  <span class="k">module</span> <span class="nn">ActsAsYaffle</span>
    <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

    <span class="n">included</span> <span class="k">do</span>
      <span class="k">def</span> <span class="nf">squawk</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="n">write_attribute</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">yaffle_text_field</span><span class="p">,</span> <span class="n">string</span><span class="p">.</span><span class="nf">to_squawk</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="n">class_methods</span> <span class="k">do</span>
      <span class="k">def</span> <span class="nf">acts_as_yaffle</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
        <span class="n">cattr_accessor</span> <span class="ss">:yaffle_text_field</span><span class="p">,</span> <span class="ss">default: </span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="ss">:yaffle_text_field</span><span class="p">]</span> <span class="o">||</span> <span class="ss">:last_squawk</span><span class="p">).</span><span class="nf">to_s</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# yaffle/lib/yaffle/acts_as_yaffle.rb

module Yaffle
  module ActsAsYaffle
    extend ActiveSupport::Concern

    included do
      def squawk(string)
        write_attribute(self.class.yaffle_text_field, string.to_squawk)
      end
    end

    class_methods do
      def acts_as_yaffle(options = {})
        cattr_accessor :yaffle_text_field, default: (options[:yaffle_text_field] || :last_squawk).to_s
      end
    end
  end
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># test/dummy/app/models/application_record.rb</span>

<span class="k">class</span> <span class="nc">ApplicationRecord</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">Yaffle</span><span class="o">::</span><span class="no">ActsAsYaffle</span>

  <span class="nb">self</span><span class="p">.</span><span class="nf">abstract_class</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# test/dummy/app/models/application_record.rb

class ApplicationRecord &lt; ActiveRecord::Base
  include Yaffle::ActsAsYaffle

  self.abstract_class = true
end
">Copy</button>
</div>
<p>最後一次執行 <code>bin/test</code>，您應該看到：</p><div class="code_container">
<pre><code class="highlight plaintext">  6 runs, 6 assertions, 0 failures, 0 errors, 0 skips
</code></pre>
<button class="clipboard-button" data-clipboard-text="  6 runs, 6 assertions, 0 failures, 0 errors, 0 skips
">Copy</button>
</div>
<div class="note"><p>使用 <code>write_attribute</code> 寫入 model 中的欄位只是外掛如何與 model 互動的一個示例，並不總是正確的使用方法。例如，您還可以使用：</p></div><div class="code_container">
<pre><code class="highlight ruby"><span class="nb">send</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">yaffle_text_field</span><span class="si">}</span><span class="s2">="</span><span class="p">,</span> <span class="n">string</span><span class="p">.</span><span class="nf">to_squawk</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='send("#{self.class.yaffle_text_field}=", string.to_squawk)
'>Copy</button>
</div>
<h3 id=""><a class="anchorlink" href="#">5 發電機</a></h3><p>產生器可以包含在您的 gem 中，只需在外掛的 <code>lib/generators</code> 目錄中建立它們即可。有關的更多資訊
產生器的建立可以在<a href="generators.html">產生器指南</a>中找到。</p><h3 id="gem"><a class="anchorlink" href="#gem">6 釋出您的 Gem</a></h3><p>當前正在開發的 Gem 外掛可以從任何 Git 儲存庫輕鬆共享。要與他人分享 Yaffle gem，只需
將程式碼提交到 Git 儲存庫（如 GitHub）並在相關應用程式的 <code>Gemfile</code> 中新增一行：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">gem</span> <span class="s2">"yaffle"</span><span class="p">,</span> <span class="ss">git: </span><span class="s2">"https://github.com/rails/yaffle.git"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='gem "yaffle", git: "https://github.com/rails/yaffle.git"
'>Copy</button>
</div>
<p>執行 <code>bundle install</code> 後，您的 gem 功能將可用於應用程式。</p><p>當 gem 準備好作為正式版本共享時，它可以釋出到 <a href="https://rubygems.org">RubyGems</a>。</p><p>或者，您可以從 Bundler 的 Rake 任務中受益。您可以檢視包含以下內容的完整列表：</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake</span> <span class="nt">-T</span>
<span class="go">
</span><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>build
<span class="gp">#</span><span class="w"> </span>將 yaffle-0.1.0.gem 構建到 pkg 目錄中
<span class="go">
</span><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake install</span>
<span class="gp">#</span><span class="w"> </span>構建並安裝 yaffle-0.1.0.gem 到系統 gems
<span class="go">
</span><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>release
<span class="gp">#</span><span class="w"> </span>建立標籤 v0.1.0 並構建並推送 yaffle-0.1.0.gem 到 Rubygems
</code></pre>
<button class="clipboard-button" data-clipboard-text="bundle exec rake -T
bundle exec rake build
bundle exec rake install
bundle exec rake release
">Copy</button>
</div>
<p>有關將 gem 釋出到 RubyGems 的更多資訊，請參閱：<a href="https://guides.rubygems.org/publishing">釋出您的 gem</a>。</p><h3 id="rdoc"><a class="anchorlink" href="#rdoc">7 RDoc 文件</a></h3><p>一旦您的外掛穩定並且您準備好部署，請幫其他人一個忙併記錄下來！幸運的是，為您的外掛編寫文件很容易。</p><p>第一步是使用有關如何使用外掛的詳細資訊更新 README 檔案。一些 key 的內容包括：</p>
<ul>
<li>你的名字</li>
<li>如何安裝</li>
<li>如何將功能新增到應用程式（常見用例的幾個示例）</li>
<li>可以幫助使用者並節省時間的警告、陷阱或提示</li>
</ul>
<p>一旦你的自述檔案是可靠的，請仔細閱讀並向開發人員將使用的所有方法新增 rdoc 註釋。將 <code># :nodoc:</code> 註釋新增到未包含在公共 API 中的程式碼部分也是一種習慣做法。</p><p>一旦你的評論好了，導航到你的外掛目錄並執行：</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bundle exec rake </span>rdoc
</code></pre>
<button class="clipboard-button" data-clipboard-text="bundle exec rake rdoc
">Copy</button>
</div>
<h4 id=""><a class="anchorlink" href="#">7.1 參考</a></h4>
<ul>
<li><a href="https://github.com/radar/guides/blob/master/gem-development.md">使用Bundler開發RubyGem</a></li>
<li><a href="https://yehudakatz.com/2010/04/02/using-gemspecs-as-intended/">按預期使用 .gemspecs</a></li>
<li><a href="https://guides.rubygems.org/specification-reference/">Gemspec 參考</a></li>
</ul>


        <h3>回饋</h3>
        <p>
          我們鼓勵您幫助提高本指南的品質。
        </p>
        <p>
          如果您發現任何拼寫錯誤或資訊錯誤，請提供回饋。
          要開始回饋，您可以閱讀我們的 <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">回饋</a> 部分。
        </p>
        <p>
          您還可能會發現不完整的內容或不是最新的內容。
          請務必為 main 新增任何遺漏的文件。假設是
          <a href="https://edgeguides.rubyonrails.org">非穩定版指南(edge guides)</a> 請先驗證問題是否已經在主分支上解決。
          請前往 <a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails 指南寫作準則</a> 查看寫作風格和慣例。
        </p>
        <p>
          如果由於某種原因您發現要修復的內容但無法自行修補，請您 <a href="https://github.com/rails/rails/issues">提出 issue</a>。
        </p>
        <p>關於 Ruby on Rails 的任何類型的討論歡迎提供任何文件至 <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">rubyonrails-docs 討論區</a>。
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>本作品已獲得<a href="https://creativecommons.org/licenses/by-sa/4.0/">知識共享署名-相同方式共享 4.0 國際</a>許可</p>
<p>“Rails”、“Ruby on Rails”和 Rails 標誌是 David Heinemeier Hansson 的商標。 保留所有權利。</p>
    </div>
  </div>
</body>
</html>
