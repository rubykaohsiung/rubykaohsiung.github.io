<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Action View Helpers — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="Action View Helpers — Ruby on Rails Guides" />
  <meta name="description" content="Action View Helpers閱讀本指南後，您將瞭解： 如何格式化日期、字串和數字 如何連結到影象、影片、樣式表等... 如何清理內容 如何本地化內容" />
  <meta property="og:description" content="Action View Helpers閱讀本指南後，您將瞭解： 如何格式化日期、字串和數字 如何連結到影象、影片、樣式表等... 如何清理內容 如何本地化內容" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="Ruby on Rails Guides" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
    <div id="version-badge">v7.0.0</div>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">更多資訊請前往 <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        更多在 Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://weblog.rubyonrails.org/">部落格</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">指南</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://discuss.rubyonrails.org/">論壇</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">在 GitHub 上做出貢獻</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="返回首頁">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">首頁</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">手冊目錄</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>從這裡開始</dt>
                  <dd><a href="getting_started.html">Rails 入門</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Models</dt>
                  <dd><a href="active_record_basics.html">Active Record 基礎</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record 遷移 (Migrations)</a></dd>
                  <dd><a href="active_record_validations.html">Active Record 驗證 (Validations)</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record 回呼 (Callbacks)</a></dd>
                  <dd><a href="association_basics.html">Active Record 關聯 (Associations)</a></dd>
                  <dd><a href="active_record_querying.html">Active Record 查詢介面</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="layouts_and_rendering.html">Rails 中的版面配置(Layouts)和算繪(Rendering)</a></dd>
                  <dd><a href="form_helpers.html">Action View 表單 Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller 概述</a></dd>
                  <dd><a href="routing.html">Rails 從外到內路由</a></dd>
                </div>
                <div class="guides-section">
                  <dt>其他元件</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support 核心擴充套件</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer 基礎知識</a></dd>
                  <dd><a href="active_job_basics.html">Active Job 基礎</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage 概述</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable 概述</a></dd>
                  <dd><a href="webpacker.html">Webpacker</a></dd>
                </div>
                <div class="guides-section">
                  <dt>深入研究</dt>
                  <dd><a href="i18n.html">Rails 國際化 (I18n) API</a></dd>
                  <dd><a href="testing.html">測試 Rails 應用程式</a></dd>
                  <dd><a href="security.html">保護 Rails 應用程式</a></dd>
                  <dd><a href="debugging_rails_applications.html">除錯 Rails 應用程式</a></dd>
                  <dd><a href="configuring.html">設定 Rails 應用程式</a></dd>
                  <dd><a href="command_line.html">Rails 命令列</a></dd>
                  <dd><a href="asset_pipeline.html">Asset Pipeline</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">自動載入和重新載入常量</a></dd>
                  <dd><a href="caching_with_rails.html">使用 Rails 快取</a></dd>
                  <dd><a href="api_app.html">將 Rails 用於僅 API 的應用程式</a></dd>
                </div>
                <div class="guides-section">
                  <dt>擴充 rails</dt>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">建立和自定義 Rails 產生器和模板</a></dd>
                </div>
                <div class="guides-section">
                  <dt>貢獻</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">在 Rails 上為 Ruby 做貢獻</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API 文件指南</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">指南指南</a></dd>
                </div>
                <div class="guides-section">
                  <dt>政策</dt>
                  <dd><a href="maintenance_policy.html">維修政策</a></dd>
                </div>
                <div class="guides-section">
                  <dt>發行說明</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">在 Rails 上升級 Ruby</a></dd>
                  <dd><a href="6_1_release_notes.html">6.1 版 - 2020 年 12 月</a></dd>
                  <dd><a href="6_0_release_notes.html">6.0 版 - 2019 年 8 月</a></dd>
                  <dd><a href="5_2_release_notes.html">5.2 版 - 2018 年 4 月</a></dd>
                  <dd><a href="5_1_release_notes.html">5.1 版 - 2017 年 4 月</a></dd>
                  <dd><a href="5_0_release_notes.html">5.0 版 - 2016 年 6 月</a></dd>
                  <dd><a href="4_2_release_notes.html">4.2 版 - 2014 年 12 月</a></dd>
                  <dd><a href="4_1_release_notes.html">4.1 版 - 2014 年 4 月</a></dd>
                  <dd><a href="4_0_release_notes.html">4.0 版 - 2013 年 6 月</a></dd>
                  <dd><a href="3_2_release_notes.html">3.2 版 - 2012 年 1 月</a></dd>
                  <dd><a href="3_1_release_notes.html">3.1 版 - 2011 年 8 月</a></dd>
                  <dd><a href="3_0_release_notes.html">3.0 版 - 2010 年 8 月</a></dd>
                  <dd><a href="2_3_release_notes.html">2.3 版 - 2009 年 3 月</a></dd>
                  <dd><a href="2_2_release_notes.html">2.2 版 - 2008 年 11 月</a></dd>
                </div>
            </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">貢獻</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">手冊目錄</option>
              <optgroup label="從這裡開始">
                  <option value="getting_started.html">Rails 入門</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record 基礎</option>
                  <option value="active_record_migrations.html">Active Record 遷移 (Migrations)</option>
                  <option value="active_record_validations.html">Active Record 驗證 (Validations)</option>
                  <option value="active_record_callbacks.html">Active Record 回呼 (Callbacks)</option>
                  <option value="association_basics.html">Active Record 關聯 (Associations)</option>
                  <option value="active_record_querying.html">Active Record 查詢介面</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Rails 中的版面配置(Layouts)和算繪(Rendering)</option>
                  <option value="form_helpers.html">Action View 表單 Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller 概述</option>
                  <option value="routing.html">Rails 從外到內路由</option>
              </optgroup>
              <optgroup label="其他元件">
                  <option value="active_support_core_extensions.html">Active Support 核心擴充套件</option>
                  <option value="action_mailer_basics.html">Action Mailer 基礎知識</option>
                  <option value="active_job_basics.html">Active Job 基礎</option>
                  <option value="active_storage_overview.html">Active Storage 概述</option>
                  <option value="action_cable_overview.html">Action Cable 概述</option>
                  <option value="webpacker.html">Webpacker</option>
              </optgroup>
              <optgroup label="深入研究">
                  <option value="i18n.html">Rails 國際化 (I18n) API</option>
                  <option value="testing.html">測試 Rails 應用程式</option>
                  <option value="security.html">保護 Rails 應用程式</option>
                  <option value="debugging_rails_applications.html">除錯 Rails 應用程式</option>
                  <option value="configuring.html">設定 Rails 應用程式</option>
                  <option value="command_line.html">Rails 命令列</option>
                  <option value="asset_pipeline.html">Asset Pipeline</option>
                  <option value="autoloading_and_reloading_constants.html">自動載入和重新載入常量</option>
                  <option value="caching_with_rails.html">使用 Rails 快取</option>
                  <option value="api_app.html">將 Rails 用於僅 API 的應用程式</option>
              </optgroup>
              <optgroup label="擴充 rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">建立和自定義 Rails 產生器和模板</option>
              </optgroup>
              <optgroup label="貢獻">
                  <option value="contributing_to_ruby_on_rails.html">在 Rails 上為 Ruby 做貢獻</option>
                  <option value="api_documentation_guidelines.html">API 文件指南</option>
                  <option value="ruby_on_rails_guides_guidelines.html">指南指南</option>
              </optgroup>
              <optgroup label="政策">
                  <option value="maintenance_policy.html">維修政策</option>
              </optgroup>
              <optgroup label="發行說明">
                  <option value="upgrading_ruby_on_rails.html">在 Rails 上升級 Ruby</option>
                  <option value="6_1_release_notes.html">6.1 版 - 2020 年 12 月</option>
                  <option value="6_0_release_notes.html">6.0 版 - 2019 年 8 月</option>
                  <option value="5_2_release_notes.html">5.2 版 - 2018 年 4 月</option>
                  <option value="5_1_release_notes.html">5.1 版 - 2017 年 4 月</option>
                  <option value="5_0_release_notes.html">5.0 版 - 2016 年 6 月</option>
                  <option value="4_2_release_notes.html">4.2 版 - 2014 年 12 月</option>
                  <option value="4_1_release_notes.html">4.1 版 - 2014 年 4 月</option>
                  <option value="4_0_release_notes.html">4.0 版 - 2013 年 6 月</option>
                  <option value="3_2_release_notes.html">3.2 版 - 2012 年 1 月</option>
                  <option value="3_1_release_notes.html">3.1 版 - 2011 年 8 月</option>
                  <option value="3_0_release_notes.html">3.0 版 - 2010 年 8 月</option>
                  <option value="2_3_release_notes.html">2.3 版 - 2009 年 3 月</option>
                  <option value="2_2_release_notes.html">2.2 版 - 2008 年 11 月</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Action View Helpers</h2><p>閱讀本指南後，您將瞭解：</p>
<ul>
<li>如何格式化日期、字串和數字</li>
<li>如何連結到影象、影片、樣式表等...</li>
<li>如何清理內容</li>
<li>如何本地化內容</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li>
<a href="#action-view-helpers-overview">Action View 提供的 helpers 的 Overview</a>

<ul>
<li><a href="#helper">資產標籤Helper</a></li>
<li><a href="#atomfeedhelper">AtomFeedHelper</a></li>
<li><a href="#helper">基準Helper</a></li>
<li><a href="#helper">快取Helper</a></li>
<li><a href="#helper">捕獲Helper</a></li>
<li><a href="#helper">日期Helper</a></li>
<li><a href="#helper">除錯Helper</a></li>
<li><a href="#helper">表格Helper</a></li>
<li><a href="#javascripthelper">JavaScriptHelper</a></li>
<li><a href="#helper">號碼Helper</a></li>
<li><a href="#helper">消毒Helper</a></li>
<li><a href="#helper">網址Helper</a></li>
<li><a href="#csrfhelper">CsrfHelper</a></li>
</ul>
</li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="action-view-helpers-overview"><a class="anchorlink" href="#action-view-helpers-overview">1 Action View 提供的 helpers 的 Overview</a></h3><p>WIP：此處未列出所有幫助程式。有關完整列表，請參閱 <a href="https://api.rubyonrails.org/v7.0.0/classes/ActionView/Helpers.html">API 文件</a></p><p>以下只是對 Action View 中可用助手的簡要概述。建議您檢視 <a href="https://api.rubyonrails.org/v7.0.0/classes/ActionView/Helpers.html">API 文件</a>，其中更詳細地涵蓋了所有幫助程式，但這應該是一個很好的起點。</p><h4 id="helper"><a class="anchorlink" href="#helper">1.1 資產標籤Helper</a></h4><p>此 module 提供了生成 HTML 的方法，這些 HTML 將 views 連結到影象、JavaScript 檔案、樣式表和提要等資產。</p><p>預設情況下，Rails 連結到公共資料夾中當前主機上的這些資產，但您可以透過在應用程式配置中設定 <code>config.asset_host</code>，通常在 <code>config/environments/production.rb</code> 中，指示 Rails 連結到來自專用資產伺服器的資產。例如，假設您的資產主機是 <code>assets.example.com</code>：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">config</span><span class="p">.</span><span class="nf">asset_host</span> <span class="o">=</span> <span class="s2">"assets.example.com"</span>
<span class="n">image_tag</span><span class="p">(</span><span class="s2">"rails.png"</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;img src="http://assets.example.com/images/rails.png" /&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='config.asset_host = "assets.example.com"
image_tag("rails.png")
# =&gt; &lt;img src="http://assets.example.com/images/rails.png" /&gt;
'>Copy</button>
</div>
<h5 id="auto-discovery-link-tag"><a class="anchorlink" href="#auto-discovery-link-tag">1.1.1 auto_discovery_link_tag</a></h5><p>返回一個連結標籤，瀏覽器和提要閱讀器可以使用它來自動檢測 RSS、Atom 或 JSON 提要。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">auto_discovery_link_tag</span><span class="p">(</span><span class="ss">:rss</span><span class="p">,</span> <span class="s2">"http://www.example.com/feed.rss"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">title: </span><span class="s2">"RSS Feed"</span> <span class="p">})</span>
<span class="c1"># =&gt; &lt;link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://www.example.com/feed.rss" /&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='auto_discovery_link_tag(:rss, "http://www.example.com/feed.rss", { title: "RSS Feed" })
# =&gt; &lt;link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://www.example.com/feed.rss" /&gt;
'>Copy</button>
</div>
<h5 id="image-path"><a class="anchorlink" href="#image-path">1.1.2 image_path</a></h5><p>計算 <code>app/assets/images</code> 目錄中影象資產的路徑。將傳遞來自文件根目錄的完整路徑。由 <code>image_tag</code> 內部使用以構建影象路徑。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">image_path</span><span class="p">(</span><span class="s2">"edit.png"</span><span class="p">)</span> <span class="c1"># =&gt; /assets/edit.png</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='image_path("edit.png") # =&gt; /assets/edit.png
'>Copy</button>
</div>
<p>如果 config.assets.digest 設定為 true，指紋將被新增到檔名中。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">image_path</span><span class="p">(</span><span class="s2">"edit.png"</span><span class="p">)</span>
<span class="c1"># =&gt; /assets/edit-2d1a2db63fc738690021fedb5a65b68e.png</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='image_path("edit.png")
# =&gt; /assets/edit-2d1a2db63fc738690021fedb5a65b68e.png
'>Copy</button>
</div>
<h5 id="image-url"><a class="anchorlink" href="#image-url">1.1.3 image_url</a></h5><p>計算 <code>app/assets/images</code> 目錄中影象資源的 URL。這將在內部呼叫 <code>image_path</code> 並與您當前的主機或資產主機合併。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">image_url</span><span class="p">(</span><span class="s2">"edit.png"</span><span class="p">)</span> <span class="c1"># =&gt; http://www.example.com/assets/edit.png</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='image_url("edit.png") # =&gt; http://www.example.com/assets/edit.png
'>Copy</button>
</div>
<h5 id="image-tag"><a class="anchorlink" href="#image-tag">1.1.4 image_tag</a></h5><p>返回源的 HTML 影象標記。源可以是完整路徑或存在於 <code>app/assets/images</code> 目錄中的檔案。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">image_tag</span><span class="p">(</span><span class="s2">"icon.png"</span><span class="p">)</span> <span class="c1"># =&gt; &lt;img src="/assets/icon.png" /&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='image_tag("icon.png") # =&gt; &lt;img src="/assets/icon.png" /&gt;
'>Copy</button>
</div>
<h5 id="javascript-include-tag"><a class="anchorlink" href="#javascript-include-tag">1.1.5 javascript_include_tag</a></h5><p>為提供的每個源返回一個 HTML 指令碼標記。您可以傳遞存在於 <code>app/assets/javascripts</code> 目錄中的 JavaScript 檔案的檔名（<code>.js</code> 副檔名是可選的）以包含在當前頁面中，或者您可以傳遞相對於文件根目錄的完整路徑。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">javascript_include_tag</span> <span class="s2">"common"</span>
<span class="c1"># =&gt; &lt;script src="/assets/common.js"&gt;&lt;/script&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='javascript_include_tag "common"
# =&gt; &lt;script src="/assets/common.js"&gt;&lt;/script&gt;
'>Copy</button>
</div>
<h5 id="javascript-path"><a class="anchorlink" href="#javascript-path">1.1.6 javascript_path</a></h5><p>計算 <code>app/assets/javascripts</code> 目錄中 JavaScript 資產的路徑。如果原始檔名沒有副檔名，則將附加 <code>.js</code>。將傳遞來自文件根目錄的完整路徑。由 <code>javascript_include_tag</code> 內部使用以構建指令碼路徑。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">javascript_path</span> <span class="s2">"common"</span> <span class="c1"># =&gt; /assets/common.js</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='javascript_path "common" # =&gt; /assets/common.js
'>Copy</button>
</div>
<h5 id="javascript-url"><a class="anchorlink" href="#javascript-url">1.1.7 javascript_url</a></h5><p>計算 <code>app/assets/javascripts</code> 目錄中 JavaScript 資產的 URL。這將在內部呼叫 <code>javascript_path</code> 並與您當前的主機或資產主機合併。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">javascript_url</span> <span class="s2">"common"</span>
<span class="c1"># =&gt; http://www.example.com/assets/common.js</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='javascript_url "common"
# =&gt; http://www.example.com/assets/common.js
'>Copy</button>
</div>
<h5 id="stylesheet-link-tag"><a class="anchorlink" href="#stylesheet-link-tag">1.1.8 stylesheet_link_tag</a></h5><p>返回指定為引數的源的樣式錶鏈接標記。如果您不指定副檔名，則 <code>.css</code> 將自動附加。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span>
<span class="c1"># =&gt; &lt;link href="/assets/application.css" rel="stylesheet" /&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='stylesheet_link_tag "application"
# =&gt; &lt;link href="/assets/application.css" rel="stylesheet" /&gt;
'>Copy</button>
</div>
<h5 id="stylesheet-path"><a class="anchorlink" href="#stylesheet-path">1.1.9 stylesheet_path</a></h5><p>計算 <code>app/assets/stylesheets</code> 目錄中樣式表資產的路徑。如果原始檔名沒有副檔名，則將附加 <code>.css</code>。將傳遞來自文件根目錄的完整路徑。由 <code>stylesheet_link_tag</code> 內部使用以構建樣式表路徑。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">stylesheet_path</span> <span class="s2">"application"</span> <span class="c1"># =&gt; /assets/application.css</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='stylesheet_path "application" # =&gt; /assets/application.css
'>Copy</button>
</div>
<h5 id="stylesheet-url"><a class="anchorlink" href="#stylesheet-url">1.1.10 stylesheet_url</a></h5><p>計算 <code>app/assets/stylesheets</code> 目錄中樣式表資產的 URL。這將在內部呼叫 <code>stylesheet_path</code> 並與您當前的主機或資產主機合併。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">stylesheet_url</span> <span class="s2">"application"</span>
<span class="c1"># =&gt; http://www.example.com/assets/application.css</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='stylesheet_url "application"
# =&gt; http://www.example.com/assets/application.css
'>Copy</button>
</div>
<h4 id="atomfeedhelper"><a class="anchorlink" href="#atomfeedhelper">1.2 AtomFeedHelper</a></h4><h5 id="atom-feed"><a class="anchorlink" href="#atom-feed">1.2.1 atom_feed</a></h5><p>這個 helper 使構建 Atom 提要變得容易。這是一個完整的使用示例：</p><p><strong>配置/路由.rb</strong></p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">resources</span> <span class="ss">:articles</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="resources :articles
">Copy</button>
</div>
<p><strong>應用程式/controllers/articles_controller.rb</strong></p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">def</span> <span class="nf">index</span>
  <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>

  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">atom</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="def index
  @articles = Article.all

  respond_to do |format|
    format.html
    format.atom
  end
end
">Copy</button>
</div>
<p><strong>應用程式/views/articles/index.atom.builder</strong></p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">atom_feed</span> <span class="k">do</span> <span class="o">|</span><span class="n">feed</span><span class="o">|</span>
  <span class="n">feed</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="s2">"Articles Index"</span><span class="p">)</span>
  <span class="n">feed</span><span class="p">.</span><span class="nf">updated</span><span class="p">(</span><span class="vi">@articles</span><span class="p">.</span><span class="nf">first</span><span class="p">.</span><span class="nf">created_at</span><span class="p">)</span>

  <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span>
    <span class="n">feed</span><span class="p">.</span><span class="nf">entry</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">entry</span><span class="o">|</span>
      <span class="n">entry</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">)</span>
      <span class="n">entry</span><span class="p">.</span><span class="nf">content</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="ss">type: </span><span class="s1">'html'</span><span class="p">)</span>

      <span class="n">entry</span><span class="p">.</span><span class="nf">author</span> <span class="k">do</span> <span class="o">|</span><span class="n">author</span><span class="o">|</span>
        <span class="n">author</span><span class="p">.</span><span class="nf">name</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">author_name</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="atom_feed do |feed|
  feed.title(&quot;Articles Index&quot;)
  feed.updated(@articles.first.created_at)

  @articles.each do |article|
    feed.entry(article) do |entry|
      entry.title(article.title)
      entry.content(article.body, type: 'html')

      entry.author do |author|
        author.name(article.author_name)
      end
    end
  end
end
">Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.3 基準Helper</a></h4><h5 id=""><a class="anchorlink" href="#">1.3.1 基準</a></h5><p>允許您測量模板中塊的執行時間並將結果記錄到日誌中。將此塊包裝在昂貴的操作或可能的瓶頸周圍，以獲得操作的時間讀數。</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="n">benchmark</span> <span class="s2">"Process data files"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">expensive_files_operation</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;% benchmark "Process data files" do %&gt;
  &lt;%= expensive_files_operation %&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<p>這會在日誌中新增諸如“處理資料檔案 (0.34523)”之類的內容，然後您可以在最佳化程式碼時使用它來比較時間。</p><h4 id="helper"><a class="anchorlink" href="#helper">1.4 快取Helper</a></h4><h5 id=""><a class="anchorlink" href="#">1.4.1 快取</a></h5><p>一種快取 view 片段而不是整個 action 或頁面的方法。這種技術對於快取選單、新聞主題列表、靜態 HTML 片段等內容非常有用。此方法採用一個包含您希望快取的內容的塊。有關詳細資訊，請參閱 <code>AbstractController::Caching::Fragments</code>。</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="n">cache</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"shared/footer"</span> <span class="cp">%&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;% cache do %&gt;
  &lt;%= render "shared/footer" %&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.5 捕獲Helper</a></h4><h5 id=""><a class="anchorlink" href="#">1.5.1 捕獲</a></h5><p><code>capture</code> 方法允許您將模板的一部分提取到變數中。然後，您可以在模板或佈局中的任何位置使用此變數。</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="vi">@greeting</span> <span class="o">=</span> <span class="n">capture</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>Welcome! The date and time is <span class="cp">&lt;%=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;% @greeting = capture do %&gt;
  &lt;p&gt;Welcome! The date and time is &lt;%= Time.now %&gt;&lt;/p&gt;
&lt;% end %&gt;
">Copy</button>
</div>
<p>然後可以在其他任何地方使用捕獲的變數。</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Welcome!<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="vi">@greeting</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Welcome!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;%= @greeting %&gt;
  &lt;/body&gt;
&lt;/html&gt;
">Copy</button>
</div>
<h5 id="content-for"><a class="anchorlink" href="#content-for">1.5.2 content_for</a></h5><p>呼叫 <code>content_for</code> 將標記塊儲存在識別符號中以供以後使用。您可以透過將識別符號作為引數傳遞給 <code>yield</code> 來對其他模板或佈局中儲存的內容進行後續呼叫。</p><p>例如，假設我們有一個標準的應用程式佈局，還有一個特殊的頁面，它需要網站的其餘部分不需要的某些 JavaScript。我們可以使用 <code>content_for</code> 將這個 JavaScript 包含在我們的特殊頁面上，而不會增加網站的其餘部分。</p><p><strong>app/views/layouts/application.html.erb</strong></p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Welcome!<span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="ss">:special_script</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Welcome! The date and time is <span class="cp">&lt;%=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Welcome!&lt;/title&gt;
    &lt;%= yield :special_script %&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Welcome! The date and time is &lt;%= Time.now %&gt;&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
">Copy</button>
</div>
<p><strong>app/views/articles/special.html.erb</strong></p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;p&gt;</span>This is a special page.<span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%</span> <span class="n">content_for</span> <span class="ss">:special_script</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;script&gt;</span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello!</span><span class="dl">'</span><span class="p">)</span><span class="nt">&lt;/script&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;p&gt;This is a special page.&lt;/p&gt;

&lt;% content_for :special_script do %&gt;
  &lt;script&gt;alert('Hello!')&lt;/script&gt;
&lt;% end %&gt;
">Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.6 日期Helper</a></h4><h5 id="distance-of-time-in-words"><a class="anchorlink" href="#distance-of-time-in-words">1.6.1 distance_of_time_in_words</a></h5><p>將兩個 Time 或 Date 物件或整數之間的大致時間距離報告為秒。如果您想要更詳細的近似值，請將 <code>include_seconds</code> 設定為 true。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">distance_of_time_in_words</span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">,</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span> <span class="o">+</span> <span class="mi">15</span><span class="p">.</span><span class="nf">seconds</span><span class="p">)</span>
<span class="c1"># =&gt; 不到一分鐘</span>
<span class="n">distance_of_time_in_words</span><span class="p">(</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">,</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span> <span class="o">+</span> <span class="mi">15</span><span class="p">.</span><span class="nf">seconds</span><span class="p">,</span> <span class="ss">include_seconds: </span><span class="kp">true</span><span class="p">)</span>
<span class="c1"># =&gt; 少於 20 秒</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="distance_of_time_in_words(Time.now, Time.now + 15.seconds)
# =&gt; 不到一分鐘
distance_of_time_in_words(Time.now, Time.now + 15.seconds, include_seconds: true)
# =&gt; 少於 20 秒
">Copy</button>
</div>
<h5 id="time-ago-in-words"><a class="anchorlink" href="#time-ago-in-words">1.6.2 time_ago_in_words</a></h5><p>類似於 <code>distance_of_time_in_words</code>，但 <code>to_time</code> 固定為 <code>Time.now</code>。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">time_ago_in_words</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="nf">minutes</span><span class="p">.</span><span class="nf">from_now</span><span class="p">)</span> <span class="c1"># =&gt; 3 minutes</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="time_ago_in_words(3.minutes.from_now) # =&gt; 3 minutes
">Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.7 除錯Helper</a></h4><p>返回包含 YAML 轉儲物件的 <code>pre</code> 標籤。這建立了一種非常易讀的方式來檢查物件。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">my_hash</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'first'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'second'</span> <span class="o">=&gt;</span> <span class="s1">'two'</span><span class="p">,</span> <span class="s1">'third'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">}</span>
<span class="n">debug</span><span class="p">(</span><span class="n">my_hash</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="my_hash = { 'first' =&gt; 1, 'second' =&gt; 'two', 'third' =&gt; [1,2,3] }
debug(my_hash)
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;pre</span> <span class="na">class=</span><span class="s">'debug_dump'</span><span class="nt">&gt;</span>---
first: 1
second: two
third:
- 1
- 2
- 3
<span class="nt">&lt;/pre&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;pre class='debug_dump'&gt;---
first: 1
second: two
third:
- 1
- 2
- 3
&lt;/pre&gt;
">Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.8 表格Helper</a></h4><p>表單 helpers 旨在透過提供一組基於您的 models 建立表單的方法，與僅使用標準 HTML 元素相比，更容易使用 models。該助手為表單生成 HTML，為每種輸入（例如，文字、密碼、選擇等）提供一種方法。當表單被提交時（即，當用戶點選提交按鈕或透過 JavaScript 呼叫 form.submit 時），表單輸入將被捆綁到 params 物件中並傳遞迴 controller。</p><p>您可以在 <a href="form_helpers.html">Action View 表單 Helpers 中瞭解有關表單助手的更多資訊
指南</a>。</p><h4 id="javascripthelper"><a class="anchorlink" href="#javascripthelper">1.9 JavaScriptHelper</a></h4><p>提供在 views 中使用 JavaScript 的功能。</p><h5 id="escape-javascript"><a class="anchorlink" href="#escape-javascript">1.9.1 escape_javascript</a></h5><p>JavaScript 段的轉義載體返回和單引號和雙引號。</p><h5 id="javascript-tag"><a class="anchorlink" href="#javascript-tag">1.9.2 javascript_tag</a></h5><p>返回包裝提供的程式碼的 JavaScript 標記。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">javascript_tag</span> <span class="s2">"alert('All is good')"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="javascript_tag &quot;alert('All is good')&quot;
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;script&gt;</span>
<span class="c1">//</span><span class="o">&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
<span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">All is good</span><span class="dl">'</span><span class="p">)</span>
<span class="c1">//]]&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;script&gt;
//&lt;![CDATA[
alert('All is good')
//]]&gt;
&lt;/script&gt;
">Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.10 號碼Helper</a></h4><p>提供將數字轉換為格式化字串的方法。提供了電話號碼、貨幣、百分比、精度、位置符號和檔案大小的方法。</p><h5 id="number-to-currency"><a class="anchorlink" href="#number-to-currency">1.10.1 number_to_currency</a></h5><p>將數字格式化為貨幣字串（例如，$13.65）。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_to_currency</span><span class="p">(</span><span class="mf">1234567890.50</span><span class="p">)</span> <span class="c1"># =&gt; $1,234,567,890.50</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_to_currency(1234567890.50) # =&gt; $1,234,567,890.50
">Copy</button>
</div>
<h5 id="number-to-human"><a class="anchorlink" href="#number-to-human">1.10.2 number_to_human</a></h5><p>漂亮列印（格式和近似值）一個數字，以便使用者更易讀；對於可能變得非常大的數字很有用。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_to_human</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>    <span class="c1"># =&gt; 1.23 Thousand</span>
<span class="n">number_to_human</span><span class="p">(</span><span class="mi">1234567</span><span class="p">)</span> <span class="c1"># =&gt; 1.23 Million</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_to_human(1234)    # =&gt; 1.23 Thousand
number_to_human(1234567) # =&gt; 1.23 Million
">Copy</button>
</div>
<h5 id="number-to-human-size"><a class="anchorlink" href="#number-to-human-size">1.10.3 number_to_human_size</a></h5><p>將位元組的大小格式化為更易於理解的表示形式；用於向用戶報告檔案大小。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_to_human_size</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>    <span class="c1"># =&gt; 1.21 KB</span>
<span class="n">number_to_human_size</span><span class="p">(</span><span class="mi">1234567</span><span class="p">)</span> <span class="c1"># =&gt; 1.18 MB</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_to_human_size(1234)    # =&gt; 1.21 KB
number_to_human_size(1234567) # =&gt; 1.18 MB
">Copy</button>
</div>
<h5 id="number-to-percentage"><a class="anchorlink" href="#number-to-percentage">1.10.4 number_to_percentage</a></h5><p>將數字格式化為百分比字串。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_to_percentage</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">0</span><span class="p">)</span> <span class="c1"># =&gt; 100%</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_to_percentage(100, precision: 0) # =&gt; 100%
">Copy</button>
</div>
<h5 id="number-to-phone"><a class="anchorlink" href="#number-to-phone">1.10.5 number_to_phone</a></h5><p>將數字格式化為電話號碼（預設為美國）。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_to_phone</span><span class="p">(</span><span class="mi">1235551234</span><span class="p">)</span> <span class="c1"># =&gt; 123-555-1234</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_to_phone(1235551234) # =&gt; 123-555-1234
">Copy</button>
</div>
<h5 id="number-with-delimiter"><a class="anchorlink" href="#number-with-delimiter">1.10.6 number_with_delimiter</a></h5><p>使用分隔符將數字格式化為成組的千位。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_with_delimiter</span><span class="p">(</span><span class="mi">12345678</span><span class="p">)</span> <span class="c1"># =&gt; 12,345,678</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_with_delimiter(12345678) # =&gt; 12,345,678
">Copy</button>
</div>
<h5 id="number-with-precision"><a class="anchorlink" href="#number-with-precision">1.10.7 number_with_precision</a></h5><p>使用指定級別的 <code>precision</code> 格式化數字，預設為 3。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">number_with_precision</span><span class="p">(</span><span class="mf">111.2345</span><span class="p">)</span>               <span class="c1"># =&gt; 111.235</span>
<span class="n">number_with_precision</span><span class="p">(</span><span class="mf">111.2345</span><span class="p">,</span> <span class="ss">precision: </span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; 111.23</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="number_with_precision(111.2345)               # =&gt; 111.235
number_with_precision(111.2345, precision: 2) # =&gt; 111.23
">Copy</button>
</div>
<h4 id="helper"><a class="anchorlink" href="#helper">1.11 消毒Helper</a></h4><p>SanitizeHelper module 提供了一組方法來清除不需要的 HTML 元素的文字。</p><h5 id=""><a class="anchorlink" href="#">1.11.1 消毒</a></h5><p>此清理 helper 將對所有標籤進行 HTML 編碼並去除所有未明確允許的屬性。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">sanitize</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="sanitize @article.body
">Copy</button>
</div>
<p>如果傳遞了 <code>:attributes</code> 或 <code>:tags</code> 選項，則只允許提到的屬性和標籤，沒有其他任何東西。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">sanitize</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span><span class="p">,</span> <span class="ss">tags: </span><span class="sx">%w(table tr td)</span><span class="p">,</span> <span class="ss">attributes: </span><span class="sx">%w(id class style)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="sanitize @article.body, tags: %w(table tr td), attributes: %w(id class style)
">Copy</button>
</div>
<p>要更改多次使用的預設值，例如將表標籤新增到預設值：</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Application</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">action_view</span><span class="p">.</span><span class="nf">sanitized_allowed_tags</span> <span class="o">=</span> <span class="s1">'table'</span><span class="p">,</span> <span class="s1">'tr'</span><span class="p">,</span> <span class="s1">'td'</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Application &lt; Rails::Application
  config.action_view.sanitized_allowed_tags = 'table', 'tr', 'td'
end
">Copy</button>
</div>
<h5 id="sanitize-css"><a class="anchorlink" href="#sanitize-css">1.11.2 sanitize_css（樣式）</a></h5><p>清理 CSS 程式碼塊。</p><h5 id="strip-links-html"><a class="anchorlink" href="#strip-links-html">1.11.3 strip_links(html)</a></h5><p>從文字中去除所有連結標籤，只留下連結文字。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">strip_links</span><span class="p">(</span><span class="s1">'&lt;a href="https://rubyonrails.org"&gt;Ruby on Rails&lt;/a&gt;'</span><span class="p">)</span>
<span class="c1"># =&gt; Ruby 在 Rails 上</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="strip_links('&lt;a href=&quot;https://rubyonrails.org&quot;&gt;Ruby on Rails&lt;/a&gt;')
# =&gt; Ruby 在 Rails 上
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="n">strip_links</span><span class="p">(</span><span class="s1">'emails to &lt;a href="mailto:me@email.com"&gt;me@email.com&lt;/a&gt;.'</span><span class="p">)</span>
<span class="c1"># =&gt; 傳送電子郵件至 me@email.com。</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="strip_links('emails to &lt;a href=&quot;mailto:me@email.com&quot;&gt;me@email.com&lt;/a&gt;.')
# =&gt; 傳送電子郵件至 me@email.com。
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="n">strip_links</span><span class="p">(</span><span class="s1">'Blog: &lt;a href="http://myblog.com/"&gt;Visit&lt;/a&gt;.'</span><span class="p">)</span>
<span class="c1"># =&gt; 部落格：訪問。</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="strip_links('Blog: &lt;a href=&quot;http://myblog.com/&quot;&gt;Visit&lt;/a&gt;.')
# =&gt; 部落格：訪問。
">Copy</button>
</div>
<h5 id="strip-tags-html"><a class="anchorlink" href="#strip-tags-html">1.11.4 strip_tags(html)</a></h5><p>從 html 中去除所有 HTML 標籤，包括註釋。
此功能由 rails-html-sanitizer gem 提供支援。</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">strip_tags</span><span class="p">(</span><span class="s2">"Strip &lt;i&gt;these&lt;/i&gt; tags!"</span><span class="p">)</span>
<span class="c1"># =&gt; 去掉這些標籤！</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='strip_tags("Strip &lt;i&gt;these&lt;/i&gt; tags!")
# =&gt; 去掉這些標籤！
'>Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="n">strip_tags</span><span class="p">(</span><span class="s2">"&lt;b&gt;Bold&lt;/b&gt; no more!  &lt;a href='more.html'&gt;See more&lt;/a&gt;"</span><span class="p">)</span>
<span class="c1"># =&gt; 不再大膽！檢視更多</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="strip_tags(&quot;&lt;b&gt;Bold&lt;/b&gt; no more!  &lt;a href='more.html'&gt;See more&lt;/a&gt;&quot;)
# =&gt; 不再大膽！檢視更多
">Copy</button>
</div>
<div class="note"><p>輸出可能仍包含未轉義的 '&lt;'、'&gt;'、'&amp;' 字元並混淆瀏覽器。</p></div><h4 id="helper"><a class="anchorlink" href="#helper">1.12 網址Helper</a></h4><p>提供建立連結和獲取依賴於路由子系統的 URL 的方法。</p><h5 id="url-for"><a class="anchorlink" href="#url-for">1.12.1 url_for</a></h5><p>返回提供的 <code>options</code> 集的 URL。</p><h6 id="url-for-"><a class="anchorlink" href="#url-for-">1.12.1.1 示例</a></h6><div class="code_container">
<pre><code class="highlight ruby"><span class="n">url_for</span> <span class="vi">@profile</span>
<span class="c1"># =&gt; /profiles/1</span>

<span class="n">url_for</span> <span class="p">[</span> <span class="vi">@hotel</span><span class="p">,</span> <span class="vi">@booking</span><span class="p">,</span> <span class="ss">page: </span><span class="mi">2</span><span class="p">,</span> <span class="ss">line: </span><span class="mi">3</span> <span class="p">]</span>
<span class="c1"># =&gt; /hotels/1/bookings/1?line=3&amp;page=2</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="url_for @profile
# =&gt; /profiles/1

url_for [ @hotel, @booking, page: 2, line: 3 ]
# =&gt; /hotels/1/bookings/1?line=3&amp;page=2
">Copy</button>
</div>
<h5 id="link-to"><a class="anchorlink" href="#link-to">1.12.2 link_to</a></h5><p>引擎蓋下從 <code>url_for</code> 派生的 URL 的連結。主要用於
建立 RESTful 資源連結，在本例中，歸結為
將 models 傳遞給 <code>link_to</code> 時。</p><p><strong>例子</strong></p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">link_to</span> <span class="s2">"Profile"</span><span class="p">,</span> <span class="vi">@profile</span>
<span class="c1"># =&gt; &lt;a href="/profiles/1"&gt;個人資料&lt;/a&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='link_to "Profile", @profile
# =&gt; &lt;a href="/profiles/1"&gt;個人資料&lt;/a&gt;
'>Copy</button>
</div>
<p>如果您的連結目標不適合 name 引數，您也可以使用塊。 ERB 示例：</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="vi">@profile</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;strong&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@profile</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/strong&gt;</span> -- <span class="nt">&lt;span&gt;</span>Check it out!<span class="nt">&lt;/span&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;%= link_to @profile do %&gt;
  &lt;strong&gt;&lt;%= @profile.name %&gt;&lt;/strong&gt; -- &lt;span&gt;Check it out!&lt;/span&gt;
&lt;% end %&gt;
">Copy</button>
</div>
<p>會輸出：</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/profiles/1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;strong&gt;</span>David<span class="nt">&lt;/strong&gt;</span> -- <span class="nt">&lt;span&gt;</span>Check it out!<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;a href="/profiles/1"&gt;
  &lt;strong&gt;David&lt;/strong&gt; -- &lt;span&gt;Check it out!&lt;/span&gt;
&lt;/a&gt;
'>Copy</button>
</div>
<p>請參閱 <a href="https://api.rubyonrails.org/v7.0.0/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to">API 文件瞭解更多資訊</a></p><h5 id="button-to"><a class="anchorlink" href="#button-to">1.12.3 button_to</a></h5><p>生成提交給傳遞的 URL 的表單。表單有一個提交按鈕
與 <code>name</code> 的 value。</p><h6 id="button-to"><a class="anchorlink" href="#button-to">1.12.3.1 示例</a></h6><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">button_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="n">sign_in_path</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;%= button_to "Sign in", sign_in_path %&gt;
'>Copy</button>
</div>
<p>大致會輸出如下內容：</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span> <span class="na">action=</span><span class="s">"/sessions"</span> <span class="na">class=</span><span class="s">"button_to"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Sign in"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;form method="post" action="/sessions" class="button_to"&gt;
  &lt;input type="submit" value="Sign in" /&gt;
&lt;/form&gt;
'>Copy</button>
</div>
<p>請參閱 <a href="https://api.rubyonrails.org/v7.0.0/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to">API 文件瞭解更多資訊</a></p><h4 id="csrfhelper"><a class="anchorlink" href="#csrfhelper">1.13 CsrfHelper</a></h4><p>返回帶有跨站點名稱的元標記“csrf-param”和“csrf-token”
分別請求防偽引數和token。</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;</span><span class="err">%=</span> <span class="na">csrf_meta_tags</span> <span class="err">%</span><span class="nt">&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;%= csrf_meta_tags %&gt;
">Copy</button>
</div>
<div class="note"><p>正常表單會生成隱藏欄位，因此它們不使用這些標籤。更多的
詳細資訊可以在 <a href="security.html#cross-site-request-forgery-csrf">Rails 安全指南</a> 中找到。</p></div>

        <h3>回饋</h3>
        <p>
          我們鼓勵您幫助提高本指南的品質。
        </p>
        <p>
          如果您發現任何拼寫錯誤或資訊錯誤，請提供回饋。
          要開始回饋，您可以閱讀我們的 <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">回饋</a> 部分。
        </p>
        <p>
          您還可能會發現不完整的內容或不是最新的內容。
          請務必為 main 新增任何遺漏的文件。假設是
          <a href="https://edgeguides.rubyonrails.org">非穩定版指南(edge guides)</a> 請先驗證問題是否已經在主分支上解決。
          請前往 <a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails 指南寫作準則</a> 查看寫作風格和慣例。
        </p>
        <p>
          如果由於某種原因您發現要修復的內容但無法自行修補，請您 <a href="https://github.com/rails/rails/issues">提出 issue</a>。
        </p>
        <p>關於 Ruby on Rails 的任何類型的討論歡迎提供任何文件至 <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">rubyonrails-docs 討論區</a>。
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>本作品已獲得<a href="https://creativecommons.org/licenses/by-sa/4.0/">知識共享署名-相同方式共享 4.0 國際</a>許可</p>
<p>“Rails”、“Ruby on Rails”和 Rails 標誌是 David Heinemeier Hansson 的商標。 保留所有權利。</p>
    </div>
  </div>
</body>
</html>
